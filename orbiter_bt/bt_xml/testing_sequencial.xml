<?xml version="1.0"?>
<root main_tree_to_execute="BehaviorTree">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <Sequence>
           

<!-- NEXT ACTION SEQUENCE -->
            <!-- <SetBlackboard output_key="nav_goal" value="3.01,0.67"/>
            <SetBlackboard output_key="yaw" value="45"/>
            <Action ID= "GoToPose" nav_goal="{nav_goal}" yaw="{yaw}"/> -->


            <SetBlackboard output_key="vending_machine_id" value="3"/>
            <SetBlackboard output_key="arm_goal" value="0.0, 0.0, 1.0"/>

            <!-- <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/> -->
            <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="20">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,1.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback> 

            <Action ID="arucoArmPose" arm_goal="{arm_goal}" vending_machine_id="{vending_machine_id}"/>

            <!-- <SetBlackboard output_key="arm_goal" value="0.0, 0.0, 2.0"/> -->
            <!-- <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/> -->
            <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="20">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,2.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback> 
            
            
            <SetBlackboard output_key="vending_machine_id" value="2"/>
            <!-- <Action ID="arucoArmPose" arm_goal="{arm_goal}" vending_machine_id="{vending_machine_id}"/> -->
            <SetBlackboard output_key="arm_goal" value="0.0, 0.0, 1.0"/>
            <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="20">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,2.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback> 

            <!-- <Action ID="vendingMachineActuate" quantity_dispense="1" vending_machine_id="{vending_machine_id}"/> -->


            <SetBlackboard output_key="arm_goal" value="0.0,0.0,2.0"/>
            <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
            <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="10">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,2.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback>

            <!-- Second Item -->
            <!-- <SetBlackboard output_key="vending_machine_id" value="3"/>
            <Action ID="arucoArmPose" arm_goal="{arm_goal}" vending_machine_id="{vending_machine_id}"/>

            <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="20">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,2.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback> 

            <Action ID="vendingMachineActuate" quantity_dispense="1" vending_machine_id="{vending_machine_id}"/>

            <SetBlackboard output_key="arm_goal" value="0.0,0.0,2.0"/>
            <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
            <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="10">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,2.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback>

            <SetBlackboard output_key="arm_goal" value="0.0,0.0,0.0"/> -->
            <!-- <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/> -->
            <!-- <Fallback>
                <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                <RetryUntilSuccessful name="Retry0UntilSuccessful" num_attempts="10">
                    <Sequence>
                        <Action ID="MoveArm_Wrapper" arm_goal="0.0,0.0,1.0"/>
                        <Action ID="MoveArm_Wrapper" arm_goal="{arm_goal}"/>
                    </Sequence>
                </RetryUntilSuccessful>
            </Fallback> 
            

            <SetBlackboard output_key="nav_goal" value="6.47,-3.7"/>
            <SetBlackboard output_key="yaw" value="0"/> -->
            <!-- <Action ID="GoToPose" nav_goal="{nav_goal}" yaw="{yaw}"/> -->
            <!-- <Action ID="waitUntilActivate" ids="0"/> -->

        </Sequence>
    </BehaviorTree>
</root>
